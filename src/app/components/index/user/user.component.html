<nz-breadcrumb style="margin:16px 0;">
  <nz-breadcrumb-item routerLink="/index/main">首页</nz-breadcrumb-item>
  <nz-breadcrumb-item>系统管理</nz-breadcrumb-item>
  <nz-breadcrumb-item routerLink="/index/user">用户管理</nz-breadcrumb-item>
</nz-breadcrumb>
<nz-content style="background:#fff; padding: 24px; min-height: 280px;">
  <form nz-form  id="searchForm">
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="6">
        <nz-form-item nzFlex>
          <nz-form-label [nzFor]="userName">用户名</nz-form-label>
          <nz-form-control>  
            <input nz-input placeholder="用户名" id="userName" name="userName" [(ngModel)]="userName">
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="6">
        <nz-form-item nzFlex>
          <nz-form-label [nzFor]="">所属角色</nz-form-label>
          <nz-form-control>
            <nz-select id="roleId" name="roleId" nzPlaceHolder="所属角色" [(ngModel)]="roleId" style="max-width: 174px; width:174px;">
              <nz-option nzValue="{{role.roleId}}" nzLabel="{{role.roleName}}"  *ngFor="let role of roles"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="6">
        <nz-form-item nzFlex>
          <nz-form-label [nzFor]="">创建日期</nz-form-label>
          <nz-form-control>
              <nz-date-picker  [nzFormat]="dateFormat" placeholder="创建日期" [(ngModel)]="createTime" id="createTime" name="createTime"></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="6" style="text-align: left;">
        <button nz-button [nzType]="'primary'" id="btnSearch" name="btnSearch" (click)="searchData();">查询</button>   
      </div>
    </div>
  </form>
  <nz-table
    #ajaxTable
    nzShowSizeChanger
    [nzFrontPagination]="false"
    [nzData]="dataSet"
    [nzLoading]="loading"
    [nzTotal]="total"
    [(nzPageIndex)]="pageIndex"
    [(nzPageSize)]="pageSize"
    (nzPageIndexChange)="searchData()"
    (nzPageSizeChange)="searchData(true)">
    <thead>
      <tr>
        <th>No.</th>
        <th>用户名</th>
        <th>所属角色</th>
        <th>手机号</th>
        <th><span>创建时间</span></th>
        <th><span>修改时间</span></th>
        <th><span>操作</span></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of ajaxTable.data;let i=index">
        <td>{{i+1}}</td>
        <td>{{data.userName}}</td>
        <td>{{data.role.roleName}}</td>
        <td>{{data.phone}}</td>
        <td>{{data.createTime}}</td>
        <td>{{data.updateTime}}</td>
        <td> 
          <button nz-button nzType="primary" (click)="showUserInfoModal(data.userId)">修改</button>
          <button nz-button nzType="danger">删除</button>
        </td>
      </tr>
    </tbody>
  </nz-table>
</nz-content>

<!--用户信息详情|修改-->
<nz-modal [(nzVisible)]="userInfoIsVisible" nzTitle="用户信息详情" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk(indexUserInfo.userId)" nzWidth="700" [nzOkLoading]="isUpUserLoading">
    <form nz-form  id="upUserForm">
      <div nz-row [nzGutter]="24">
        <div nz-col nzSpan="12">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="userName">用&nbsp;&nbsp;户&nbsp;&nbsp;名</nz-form-label>
            <nz-form-control>  
              <input nz-input  id="upUserName" name="upUserName" [(ngModel)]="indexUserInfo.userName">
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12">
          <nz-form-item nzFlex>
              <nz-form-label [nzFor]="upRoleId">所属角色</nz-form-label>
              <nz-form-control>
                <nz-select id="upRoleId" name="upRoleId" style="max-width: 174px; width:174px;" [(ngModel)]="indexUserInfo.roleId">
                  <nz-option nzValue="{{role.roleId}}" nzLabel="{{role.roleName}}"  *ngFor="let role of roles"></nz-option>
                </nz-select>
              </nz-form-control>
          </nz-form-item>  
        </div>
      </div>
      <div nz-row [nzGutter]="24">
        <div nz-col nzSpan="12">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="upPhone">联系电话</nz-form-label>
            <nz-form-control> 
              <input nz-input id="upPhone" name="upPhone" [(ngModel)]="indexUserInfo.phone">
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="12">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="UpCreateTime">创建日期</nz-form-label>
            <nz-form-control> 
              <nz-date-picker  [nzFormat]="dateFormat"  id="UpCreateTime" name="UpCreateTime" nzDisabled [(ngModel)]="indexUserInfo.createTime"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div nz-row [nzGutter]="24">
        <div nz-col nzSpan="12">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="UpUpdateTime">修改日期</nz-form-label>
            <nz-form-control>
              <nz-date-picker  [nzFormat]="dateFormat"  id="UpUpdateTime" name="UpUpdateTime" nzDisabled [(ngModel)]="indexUserInfo.updateTime"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </form>